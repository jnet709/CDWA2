@model IEnumerable<CoreDataWebApi.Dto.ProductDto>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Products</h2>

<div>
    Page:
    @for (int page = 1; page <= ViewBag.TotalPages; page++)
    {
        @Html.ActionLink(page.ToString(), "Index", "Product", new { pageNumber = page}, null)
    }
    <div>
        Page #:  <span style="background-color:yellow;">@ViewBag.PageNumber</span>
    </div>
</div>
<table>
    <tr>
        <th>
             @Html.DisplayName("Id")
        </th>
        <th>
            @Html.DisplayName("Name")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CategoryId)
        </th>
        <th>
            @Html.DisplayName("Quantity/Unit")
        </th>
        <th>
            @Html.DisplayName("Price")
        </th>
        <th>
            @Html.DisplayName("Units On Stock")
        </th>
        <th>
            @Html.DisplayName("Units On Order")
        </th>
        <th>
             @Html.DisplayName("Reorder Level")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Discontinued)
        </th>
        <th>
            @Html.DisplayName("Category")
        </th>
        <th>
            @Html.DisplayName("Order Detail Ids")
        </th>
        <th>Actions</th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ProductId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ProductName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CategoryId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.QuantityPerUnit)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UnitPrice)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UnitsInStock)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UnitsOnOrder)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ReorderLevel)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Discontinued)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CategoryName)
        </td>
        <td>
            @{ var ods = string.Join("; ", item.OrderDetails.ToArray());}
            <span>@ods</span>
        </td>
        <td>
            @Html.ActionLink("Details", "Details", new { id=item.ProductId })
        </td>
    </tr>
}

</table>

